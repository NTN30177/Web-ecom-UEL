<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  integrity="sha512-..." crossorigin="anonymous" />

<div class="container">
  <div class="row header-info">
    <div class="col-12">Sản phẩm/Thêm sản phẩm</div>
    <div class="col-12 header-info__main">Thêm sản phẩm</div>
  </div>
  <hr />
</div>

<div class="container">
  <form class="row" [formGroup]="addProductForm" (ngSubmit)="onSubmit()" ngNoForm>
    <div class="col-8 header-info__left">
      <div class="container product-info product-info__detail">
        <div class="row product-info__title">
          <div class="col p-0">Thông tin sản phẩm</div>
        </div>
        <div class="row">
          <hr />
        </div>

        <div class="row product-info__body gap-1.5">

          <div class="form-group p-0">
            <label for="productName ">Tên sản phẩm:</label>
            <input type="text" class="form-control" id="productName" placeholder="Nhập tên sản phẩm"
              formControlName="name" [class.is-invalid]="productName.invalid && productName.touched" />
            <small class="text-danger"
              *ngIf="productName.errors?.['required'] &&( productName.touched || productName.dirty)">*Bạn chưa nhập
              tên</small>
            <small class="text-danger"
              *ngIf="productName.errors?.['pattern'] &&( productName.touched || productName.dirty)">*Tên phải bắt đầu với
              bảng chữ cái</small>

          </div>
          <div class="form-group p-0">
            <label for="sku">SKU:</label>
            <input type="text" class="form-control" id="sku" placeholder="ed:SDCDS25" formControlName="sku"
              [class.is-invalid]="productSku.invalid && productSku.touched" />
            <small class="text-danger"
              *ngIf="productSku.errors?.['required'] &&( productSku.touched || productSku.dirty)">*Bạn chưa nhập
              sku</small>
            <small class="text-danger"
              *ngIf="productSku.errors?.['pattern'] &&( productSku.touched || productSku.dirty)">Sku phải bắt đầu với
              bảng chữ cái</small>
          </div>
          <div class="form-group p-0">
            <label for="description">Nhập mô tả:</label>
            <textarea class="form-control" id="description" cols="20" placeholder="Nhập mô tả sản phẩm" rows="10"
              formControlName="description"
              [class.is-invalid]="productDescription.invalid && productDescription.touched"></textarea>

            <small class="text-danger" [class.d-none]="productDescription.valid || productDescription.untouched">*Bạn
              chưa nhập mô tả
              sản phẩm</small>
            <small class="text-danger"
              *ngIf="productDescription.errors?.['pattern'] &&( productDescription.touched || productDescription.dirty)">Mô
              tả
              phải bắt đầu với bảng chữ cái</small>

          </div>
        </div>
      </div>
      <div id="variant-container">
        <div *ngFor="let variantForm of variants; let i = index"
          class="container product-info product-info__body variant-div" [class.col-12]="selectedType == 'Phụ kiện'">
          <div class="col-12 p-0 d-flex justify-content-between" *ngIf="selectedType != 'Phụ kiện'">
            <div class="form-group color">
              <label for="color ">Màu sắc :</label>
              <select class="col-auto mt-2" name="color" id="color" placeholder="Nhập color" formControlName="color">
                <option value="">Chọn màu sắc</option>
                <option *ngFor="let color of colors" [value]="color">
                  {{ color }}
                </option>
              </select>
              <small class="text-danger" [class.d-none]="productColor.valid || productColor.untouched">*Bạn chưa chọn màu
                sắc</small>
            </div>
            <div class="col-auto delete-varirant" *ngIf="selectedType != 'Phụ kiện'" (click)="deleteVariant(i)">
              <div class="icon"><i class="fas fa-trash-alt"></i></div>
            </div>
          </div>
          <div class="row g-2 color-detail__quantity" *ngIf="selectedType != 'Phụ kiện'">
            <label for="color ">Số lượng</label>

            <div class="col-4">
              <label for="color ">Size S:</label>
              <input type="text" class="form-control" id="color" placeholder="Nhập số lượng" formControlName="sizeS"
                [class.is-invalid]="productSizeS.invalid && productSizeS.touched" />
              <small class="text-danger" [class.d-none]="productSizeS.valid || productSizeS.untouched">*Nhập số
                lượng</small>

            </div>
            <div class="col-4">
              <label for="color ">Size M:</label>
              <input type="text" class="form-control" id="color" placeholder="Nhập số lượng" formControlName="sizeM"
                [class.is-invalid]="productSizeM.invalid && productSizeM.touched" />
              <small class="text-danger" [class.d-none]="productSizeM.valid || productSizeM.untouched">*Nhập số
                lượng</small>

            </div>
            <div class="col-4"></div>
            <div class="col-4">
              <label for="color ">Size L:</label>

              <input type="text" class="form-control" id="color" placeholder="Nhập số lượng" formControlName="sizeL"
                [class.is-invalid]="productSizeL.invalid && productSizeL.touched" />
              <small class="text-danger" [class.d-none]="productSizeL.valid || productSizeL.untouched">*Nhập số
                lượng</small>
            </div>
            <div class="col-4">
              <label for="color ">Size XL:</label>

              <input type="text" class="form-control" id="color" placeholder="Nhập số lượng" formControlName="sizeXL"
                [class.is-invalid]="productSizeXL.invalid && productSizeXL.touched" />
              <small class="text-danger" [class.d-none]="productSizeXL.valid || productSizeXL.untouched">*Nhập số
                lượng</small>
            </div>
            <div class="col-4">
              <label for="color ">Size XXL:</label>

              <input type="text" class="form-control" id="color" placeholder="Nhập số lượng" formControlName="sizeXXL"
                [class.is-invalid]="productSizeXXL.invalid && productSizeXXL.touched" />
              <small class="text-danger" [class.d-none]="productSizeXXL.valid || productSizeXXL.untouched">*Nhập số
                lượng</small>
            </div>

          </div>
          <div class="row g-2 color-detail__quantity" *ngIf="selectedType == 'Phụ kiện'">
            <div class="col-12 p-0 d-flex justify-content-between ">
              <div class="col-5 form-group color">
                <label for="color ">Màu sắc :</label>
                <select class="col-auto mt-2" formControlName="colorFreeSize"[class.is-invalid]="
                productColorFreeSize.invalid && productColorFreeSize.touched">
                  <option value="">Chọn màu sắc</option>
                  <option *ngFor="let color of colors" [value]="color">
                    {{ color }}
                  </option>
                </select>

                <small class="text-danger" [class.d-none]="productColorFreeSize.valid || productColorFreeSize.untouched">Nhập
                  màu</small>
              </div>
              <div class="col-5 color-free__size">
                <label for="color  ">Free size</label>
                <div>
                  <input type="text" class="form-control" id="color" placeholder="Nhập số lượng" formControlName="freeSize" [class.is-invalid]="
                      productFreeSize.invalid && productFreeSize.touched
                    " />
                  <small class="text-danger" [class.d-none]="productFreeSize.valid || productFreeSize.untouched">*Nhập số
                    lượng</small>
                </div>
              </div>
              <div class="col-auto delete-varirant" (click)="deleteVariant(i)">
                <label for=""></label>
                <div class="icon align-items-end "><i class="fas fa-trash-alt"></i></div>
              </div>
            </div>
          </div>
          <div class="form-group col-12 img">
            <label for="img ">Hình ảnh cho màu ne</label>
            <input type="file" class="text-center">
            <!-- <input type="file" class="text-center" (change)="onFileChange($event)" [class.is-invalid]="productImagesFreeSize.invalid && productImagesFreeSize.touched" /> -->
          </div>
            <!-- <small class="text-danger" [class.d-none]="productImagesFreeSize.valid || productImagesFreeSize.untouched">Nhập hình ảnh</small> -->
        </div>
      </div>
      <div class="container action-add__variant">
        <div class="row action-add__product">
          <div class="col-auto add-variant" (click)="addVariant()" >
            <div class="icon">+</div>
            <div class="content">Thêm biến thể</div>
          </div>          
        </div>
      </div>
    </div>

    <div class="col-4 header-info__right">
      <div class="container product-info product-info__detail">
        <div class="row product-info__title">
          <div class="col p-0">Thông tin sản phẩm</div>
        </div>
        <div class="row">
          <hr />
        </div>
        <div class="row product-info__body">
          <div class="row form-group p-0">
            <label for="productPrice">Giá bán</label>
            <div class="row price text-center d-flex justify-content-center align-items-center">
              <div class="col-9 pe-0">
                <input type="text" class="form-control" id="productPrice" placeholder="Nhập giá bán"
                  formControlName="price" [class.is-invalid]="
                    productPrice.invalid && productPrice.touched
                  " />
              </div>
              <div class="col-3 p-0">
                <input type="text" class="form-control" id="productPriceD" value="VNĐ" disabled />
              </div>
            </div>
            <small class="text-danger" [class.d-none]="productPrice.valid || productPrice.untouched">*Bạn chưa nhập
              giá</small>


          </div>

          <div class="row form-group p-0">
            <label for="productCode">Giá Gốc</label>
            <div class="row price text-center d-flex justify-content-center align-items-center">
              <div class="col-9 pe-0">
                <input type="text" class="form-control" id="productCode" placeholder="Nhập giá gốc" required />
              </div>
              <div class="col-3 ps-0">
                <input type="text" class="form-control" id="productCodeD" value="VNĐ" disabled />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container product-info product-info__detail">
        <div class="row product-info__title">
          <div class="col p-0">Phân loại</div>
        </div>
        <div class="row">
          <hr />
        </div>
        <div class="row product-info__body">
          <div class="form-group type p-0">
            <label for="color ">Type :</label>
            <select class="col-12" (click)="clickSelectChoose('type', $event)" formControlName="type"
              [class.is-invalid]="productType.invalid && productType.touched">
              <option value="">Chọn type</option>
              <option *ngFor="let type of types" [value]="type">
                {{ type }}
              </option>
            </select>
            <small class="text-danger" [class.d-none]="productType.valid || productType.untouched">*Bạn chưa chọn type
              sản phẩm</small>

            <input *ngIf="showInputType" type="text" class="form-control add-new" formControlName="newTypeInput" />
            <div class="col-auto add-action" (click)="addDiv('type')">
              <div class="icon">+</div>
              <div class="content" *ngIf="!showInputType">Thêm type mới</div>
              <div class="content" *ngIf="showInputType" (click)="clickSaveAdd('type', $event)">
                Lưu type mới
              </div>
            </div>
          </div>
          <div class="form-group type p-0" *ngIf="showDivSubtype">
            <label for="color ">Subtype :</label>
            <select class="col-12" (click)="clickSelectChoose('subType', $event)" formControlName="subType">
              <option value="">Chọn type</option>
              <option *ngFor="let subType of subTypes" [value]="subType">
                {{ subType }}
              </option>
            </select>
            <small class="text-danger" [class.d-none]="productSubType.valid || productSubType.untouched">*Bạn chưa chọn
              Subtype sản phẩm</small>

            <input *ngIf="showInputSubtype" type="text" class="form-control add-new"
              formControlName="newSubTypeInput" />
            <div class="col-auto add-action" (click)="addDiv('subtype')">
              <div class="icon">+</div>
              <div class="content" *ngIf="!showInputSubtype">
                Thêm Subtype mới
              </div>
              <div class="content" *ngIf="showInputSubtype" (click)="clickSaveAdd('subType',$event)">
                Lưu Subtype mới
              </div>
            </div>
          </div>
          <div class="form-group type p-0" *ngIf="showDivCollection">
            <label for="color ">Collection :</label>
            <select class="col-12" (click)="clickSelectChoose('collection', $event)" formControlName="collection">
              <option value="">Chọn BST</option>
              <option *ngFor="let collection of collections" [value]="collection">
                {{ collection }}
              </option>
            </select>
            <input *ngIf="showInputCollection" type="text" class="form-control add-new"
              formControlName="newCollectionInput" />
            <div class="col-auto add-action" (click)="addDiv('collection')">
              <div class="icon">+</div>
              <div class="content" *ngIf="!showInputCollection">
                Thêm type mới
              </div>
              <div class="content" *ngIf="showInputCollection" (click)="clickSaveAdd('collection', $event)">
                Lưu type mới
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="frame_btn_footer">
  <div class="row">
    <div class="form-group col-md-6 col-sm-6 ps-4">
      <button class="btn_delete" id="btn_delete" name="btn_delete">Xóa</button>
    </div>
    <div class="col-md-6 col-sm-6 pe-4">
      <div class="form-group btn_group_footer text-end">
        <button class="btn_cancel" id="btn_cancel" name="btn_cancel">
          Hủy
        </button>
        <button class="btn_create" id="btn_create" name="btn_create" (click)="markAllAsTouched()">
          Lưu
        </button>
      </div>
    </div>
  </div>
</div>